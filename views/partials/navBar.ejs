<div class="burger-container" onClick="toggleNavPills()">
  <div class="burger">
    <div class="burger-line burger-line-top"></div>
    <div class="burger-line burger-line-middle"></div>
    <div class="burger-line burger-line-bottom"></div>
  </div>
</div>
<div class="navBar" id="navBar">
  <% navbar.items.forEach(link => { %>
    <a class="navPill navLink <%= link.visible =='true' ? 'showMenuButton' : link.visible =='onAuth' && user.id != -1 ? 'showMenuButton' : link.visible =='!onAuth' && user.id == -1 ? 'showMenuButton' : 'hideMenuButton' %>" href="<%= link.route %>">
      <div class="material-icons icon"><%= link.matIcon %></div>
      <div class="iconLabel"><%= link.caption %></div>
    </a>
  <% }) %>
</div>
<!-- <div class="navBar" id="navBar">
  <a class="navPill navLink" href="/home">
    <div class="material-icons icon">home</div>
    <div class="iconLabel">Home</div>
  </a>
  <a class="navPill navLink" href="/about">
    <div class="material-icons icon">info</div>
    <div class="iconLabel">About</div>
  </a>
  <a class="navPill navLink" href="/products">
    <div class="material-icons icon">inventory</div>
    <div class="iconLabel">Products</div>
  </a>
  <a class="navPill navLink" href="/location">
    <div class="material-icons icon">place</div>
    <div class="iconLabel">Location</div>
  </a>
  <a class="navPill navLink <%= user.id != -1 ? 'showMenuButton' : 'hideMenuButton' %>" href="/cart">
    <div class="material-icons">shopping_cart</div>
    <div class="iconLabel">Cart</div>
    <div id="cartCounter" class="cartCounter"></div>
  </a>
  <a class="navPill navLink <%= user.id == -1 ? 'showMenuButton' : 'hideMenuButton' %>" href="/logIn">
    <div class="material-icons icon">login</div>
    <div class="iconLabel">Log In</div>
  </a>
  <a class="navPill navLink <%= user.id != -1 ? 'showMenuButton' : 'hideMenuButton' %>" href="/logOut">
    <div class="material-icons icon">logout</div>
    <div class="iconLabel">Log Out</div>
  </a>
</div> -->
<script>
  const settings = {
    id: "<%= settings.id %>",
    projectName: "<%= settings.projectName %>",
    vatPercentage: "<%= settings.vatPercentage %>",
  };
  const auth = {
    id: "<%= user.id %>",
    forename: "<%= user.forename %>",
    surname: "<%= user.surname %>",
    email: "<%= user.email %>",
    token: "<%= user.token %>",
  };
  // Save projectSettings and auth info to BROWSER's local storage
  // So that the data is available for the dynamic javascript code
  localStorage.setItem("settings", JSON.stringify(settings));
  localStorage.setItem("auth", JSON.stringify(auth));
  // If different user logs in on same machine remove the cached cart
  // Data from the previous user
  const cartCache = JSON.parse(localStorage.getItem("cart"));
  if (cartCache) {
    if (cartCache.userId !== "<%= user.id %>") {
      localStorage.removeItem("cart");
    }
  }

</script>